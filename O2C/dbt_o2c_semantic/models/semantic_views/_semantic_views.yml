version: 2

models:
  - name: sv_o2c_reconciliation
    description: |
      **O2C Reconciliation Semantic View**
      
      Snowflake SEMANTIC VIEW enabling Cortex Analyst to answer natural language
      questions about order-to-cash metrics.
      
      **Materialization:** semantic_view (using dbt_semantic_view package)
      **Source Table:** dm_o2c_reconciliation
      **Schema:** O2C_SEMANTIC_VIEWS
      
      **Example Questions for Cortex Analyst:**
      - "What is the total revenue by customer type?"
      - "Show me customers with outstanding AR over $10,000"
      - "What's the average DSO for external customers?"
      - "Which customers are overdue on payments?"
      
      **Dimensions:** customer_name, customer_type, customer_country, status, dates
      **Facts:** order_amount, outstanding_amount, DSO, cycle times
      **Metrics:** total_revenue, avg_dso, total_ar_outstanding
    
    config:
      materialized: semantic_view
      schema: o2c_semantic_views
      access: public
    
    columns:
      - name: customer_name
        description: "Customer company name (Cortex Analyst will recognize synonyms: customer, company, account)"
      
      - name: order_amount
        description: "Order amount in USD (synonyms: revenue, sales, order value)"
      
      - name: outstanding_amount
        description: "AR outstanding in USD (synonyms: receivables, AR, unpaid amount)"
      
      - name: days_order_to_cash
        description: "Days sales outstanding (synonyms: DSO, collection period)"

  - name: sv_o2c_customer_summary
    description: |
      **O2C Customer Summary Semantic View**
      
      Pre-aggregated customer-level metrics for fast Cortex Analyst responses.
      
      **Materialization:** semantic_view (using dbt_semantic_view package)
      **Source Table:** agg_o2c_by_customer
      **Schema:** O2C_SEMANTIC_VIEWS
      
      **Example Questions for Cortex Analyst:**
      - "Which customer has the highest lifetime revenue?"
      - "Show me top 10 customers by AR outstanding"
      - "What's the average DSO by customer country?"
      - "Which customers have the most orders?"
      
      **Dimensions:** customer attributes (name, type, country)
      **Facts:** Lifetime metrics (orders, revenue, AR, DSO)
      **Metrics:** Customer aggregations
    
    config:
      materialized: semantic_view
      schema: o2c_semantic_views
      access: public

